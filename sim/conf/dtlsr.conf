# Simple test of DTLSR

set N 5

sim set runtill 5000
sim set route_type dtlsr
conn set type static

# 
# First set up the five nodes in a linear arrangement
#
for {set i 0} {$i < $N} {incr i} {
    set cur "node$i"
    set last "node[expr $i - 1]"
        
    sim create_node $cur
    $cur route local_eid dtn://$cur
    $cur registration add dtn://$cur/test

    if {$i != 0} {
        $last link add l-$cur  $cur  alwayson sim remote_eid=dtn://$cur
        $cur  link add l-$last $last alwayson sim remote_eid=dtn://$last
    }
}

conn up * *

sim at 4.5 eval {
    for {set i 0} {$i < $N} {incr i} {
        puts "Routing table at node $i: [node$i route dump]"
    }
}



